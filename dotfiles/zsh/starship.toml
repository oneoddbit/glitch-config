# ===== Starship â€” Saturn Pursuit (rainbow-fill, 2 linhas) =====
add_newline = true
palette = "saturn"

# LINHA 1 (esquerda) e LINHA 2 (prompt)
format = """
$custom_userhost$directory$git_branch$custom_git_state$fill
$character
"""

# LINHA 1 (direita)  â† AQUI entram ahead/behind com cores prÃ³prias
right_format = "$custom_git_ahead$custom_git_behind$cmd_duration$custom_lang$ssh$time$status"

[character]
success_symbol = "[ğŸªâ¤â™„ ](fg:bg0 bg:none)"
error_symbol   = "[ğŸªâ¤â™„ ](fg:error bg:none)"
vicmd_symbol   = "[ğŸªâ¤â™„ ](fg:seg3 bg:none)"

[palettes.saturn]
bg0   = "#000014"
fg0   = "#E5E5E5"
seg1  = "#8B5CF6"
seg2  = "#00B3FF"
seg3  = "#00FFD5"
ok    = "#22C55E"
warn  = "#FFDD00"
ahead = "#5EEAD4"
behind= "#F59E0B"
error = "#FF6E6E"
timec = "#767676"
blk   = "#0A0A0A"

# â”€â”€ user@host (bloco 1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[custom.custom_userhost]
command = 'printf "%s@%s >" "$USER" "$(hostname -s)"'
shell = ["bash","-lc"]
when = "true"
format = "[î‚¶](fg:seg1)[$output](fg:bg0 bg:seg1)[î‚°](fg:seg1 bg:seg2)"

# â”€â”€ diretÃ³rio (bloco 2) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[directory]
style = "fg:bg0 bg:seg2"
truncation_length = 3
truncate_to_repo = true
format = "[$path]($style)[î‚°](fg:seg2 bg:seg3)"

# â”€â”€ ramo git (bloco 3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[git_branch]
symbol = "î‚  "
style = "fg:bg0 bg:seg3"
format = "[$symbol$branch]($style)"

# â”€â”€ estado git (clean/changed/conflicts) com cor prÃ³pria â”€â”€â”€â”€â”€
[custom.custom_git_state]
shell = ["bash","-lc"]
when = 'git rev-parse --is-inside-work-tree >/dev/null 2>&1'
command = '''
out=""
readarray -t lines < <(git status --porcelain=2 -b 2>/dev/null || true)
staged=0; modified=0; untracked=0; conflicted=0; renamed=0; deleted=0
for l in "${lines[@]}"; do
  c="${l:0:1}"
  case "$c" in
    1|2)
      x="${l:2:1}"; y="${l:3:1}"
      [[ "$x" != "." ]] && ((staged++))
      [[ "$y" != "." ]] && ((modified++))
      [[ "$c" == "2" ]] && ((renamed++))
      ;;
    ?)
      ((untracked++))
      ;;
    u)
      ((conflicted++))
      ;;
  esac
done
(( staged    > 0 )) && out+="+${staged} "
(( modified  > 0 )) && out+="âœ${modified} "
(( untracked > 0 )) && out+="â€¦${untracked} "
(( renamed   > 0 )) && out+="Â»${renamed} "
(( deleted   > 0 )) && out+="âœ˜${deleted} "
(( conflicted> 0 )) && out+="âš ${conflicted} "
echo "$out"
'''
# TrÃªs blocos condicionais (cores) baseados no output do mÃ³dulo acima:
format = "$output"

[custom.git_state_clean]
shell = ["bash","-lc"]
when = 'git rev-parse --is-inside-work-tree >/dev/null 2>&1 && test -z "$(starship module custom.custom_git_state)"'
command = 'echo " "'
format  = "[ ](bg:seg3)[âœ“ clean](fg:bg0 bg:ok)[î‚°](fg:ok bg:none)"

[custom.git_state_changed]
shell = ["bash","-lc"]
when = 'git rev-parse --is-inside-work-tree >/dev/null 2>&1 && test -n "$(starship module custom.custom_git_state)" && ! starship module custom.custom_git_state | grep -q "âš "'
command = 'starship module custom.custom_git_state'
format  = "[ ](bg:seg3)[$output](fg:blk bg:warn)[î‚°](fg:warn bg:none)"

[custom.git_state_conflicts]
shell = ["bash","-lc"]
when = 'git rev-parse --is-inside-work-tree >/dev/null 2>&1 && starship module custom.custom_git_state | grep -q "âš "'
command = 'starship module custom.custom_git_state'
format  = "[ ](bg:seg3)[$output](fg:bg0 bg:error)[î‚°](fg:error bg:none)"

# â”€â”€ AHEAD / BEHIND (cores prÃ³prias) â†’ lado direito â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[custom.custom_git_ab]
shell = ["bash","-lc"]
when = 'git rev-parse --is-inside-work-tree >/dev/null 2>&1'
command = '''
ahead=""; behind=""
while IFS= read -r l; do
  [[ "$l" =~ ^#\ branch\.ab\ +ahead\ ([0-9]+)\ +behind\ ([0-9]+) ]] && { ahead="${BASH_REMATCH[1]}"; behind="${BASH_REMATCH[2]}"; break; }
  [[ "$l" =~ ^#\ branch\.ab\ +ahead\ ([0-9]+) ]] && ahead="${BASH_REMATCH[1]}"
  [[ "$l" =~ ^#\ branch\.ab\ +behind\ ([0-9]+) ]] && behind="${BASH_REMATCH[1]}"
done < <(git status --porcelain=2 -b 2>/dev/null || true)
echo "${ahead:-0} ${behind:-0}"
'''
format = "$output"

[custom.custom_git_ahead]
shell = ["bash","-lc"]
when = 'set -- $(starship module custom.custom_git_ab); test "${1:-0}" != "0"'
command = 'set -- $(starship module custom.custom_git_ab); echo "â‡¡$1"'
format  = "[î‚²](fg:ahead)[$output](fg:bg0 bg:ahead)[î‚´](fg:ahead bg:none)"

[custom.custom_git_behind]
shell = ["bash","-lc"]
when = 'set -- $(starship module custom.custom_git_ab); test "${2:-0}" != "0"'
command = 'set -- $(starship module custom.custom_git_ab); echo "â‡£$2"'
format  = "[î‚²](fg:behind)[$output](fg:bg0 bg:behind)[î‚´](fg:behind bg:none)"

# â”€â”€ duraÃ§Ã£o comando â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[cmd_duration]
min_time = 1000
format = "[î‚²](fg:ok)[ â± $duration ](fg:bg0 bg:ok)[î‚´](fg:ok bg:none)"

# â”€â”€ linguagens (Node / Python) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[custom.custom_lang]
shell = ["bash","-lc"]
when = "true"
command = '''
out=""
if command -v node >/dev/null 2>&1 && [ -f package.json ]; then
  ver="$(node -v 2>/dev/null)"; out="$out[ îœ˜ $ver ]"
fi
if command -v python3 >/dev/null 2>&1 && ( [ -f pyproject.toml ] || [ -f requirements.txt ] || [ -f .python-version ] ); then
  ver="$(python3 -V 2>/dev/null | awk '{print $2}')"; out="$out[ ğŸ $ver ]"
fi
echo "$out"
'''
format = "[î‚²](fg:seg3)[$output](fg:bg0 bg:seg3)[î‚´](fg:seg3 bg:none)"

# â”€â”€ ssh â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[ssh]
disabled = false
format = "[î‚²](fg:warn)[ î‚¢ ssh ](fg:bg0 bg:warn)[î‚´](fg:warn bg:none)"

# â”€â”€ hora â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[time]
disabled = false
time_format = "%H:%M"
format = "[î‚²](fg:timec)[ ğŸ•’ $time ](fg:bg0 bg:timec)[î‚´](fg:timec bg:none)"

# â”€â”€ status erro (retcode) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[status]
disabled = false
map_symbol = true
pipestatus = false
format = "[î‚²](fg:error)[ âœ˜ $status ](fg:bg0 bg:error)[î‚´](fg:error bg:none)"
